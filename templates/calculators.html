{% extends "main.html" %}
{% load static %}
{% block title %}Kalkulatory{% endblock %}

{% block website_body %}
<nav class="navbar navbar-expand-lg bg-dark" data-bs-theme="dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="{% url 'home_page' %}"><button type="button" class="btn btn-dark"><img src="{% static 'img/logo.png' %}" alt="HOME" class="img-fluid" style="max-width: 100px;"></button></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mx-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href="{% url 'cars_base' %}"><button type="button" class="btn btn-light">BAZA AUT</button></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="{% url 'calculators' %}"><button type="button" class="btn btn-light">KALKULATORY</button></a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" href=""><button type="button" class="btn btn-light">ZALOGUJ</button></a>
          </li>
            </ul>
      </div>
    </div>
  </nav>

<div class="container mt-5">
    <div class="card">
      <div class="card-header text-center">
        <h3>Przelicznik jednostek mocy</h3>
      </div>
      <div class="card-body">
        <form id="powerForm">
          <div class="mb-3">
            <label for="numberInput" class="form-label">Wpisz moc:</label>
            <input type="number" class="form-control" id="numberInput" required>
          </div>
          <div class="mb-3">
            <label for="unitSelect" class="form-label">Wybierz jednostkę:</label>
            <select class="form-select" id="unitSelect" required>
              <option value="kW">Kilowat (kW)</option>
              <option value="KM">Konie mechaniczne (KM)</option>
              <option value="BHP">Brake horsepower (BHP)</option>
              <option value="HP">Horsepower (HP)</option>
              <option value="PS">Pferdestärke (PS)</option>
              <option value="MW">Megawat (MW)</option>
            </select>
          </div>
          <button type="submit" class="btn btn-warning w-100">Przelicz</button>
        </form>
        <div class="mt-3">
          <h5 id="result-header"></h5>
          <table class="table">
            <thead>
              <tr>
                <th>Ilość</th>
                <th>Jednostka</th>
              </tr>
            </thead>
            <tbody id="result-table">
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    document.getElementById('powerForm').addEventListener('submit', function(event) {
      event.preventDefault();
  
      const number = parseFloat(document.getElementById('numberInput').value);
      const unit = document.getElementById('unitSelect').value;
  
      // Konwersje na kW (kilowaty)
      let powerInKW;
      switch(unit) {
        case 'kW':
          powerInKW = number;
          break;
        case 'KM':
          powerInKW = number * 0.73549875;
          break;
        case 'BHP':
          powerInKW = number * 0.745699872;
          break;
        case 'HP':
          powerInKW = number * 0.745699872;
          break;
        case 'PS':
          powerInKW = number * 0.73549875;
          break;
        case 'MW':
          powerInKW = number * 1000;
          break;
      }
  
      // Konwersje z kW na inne jednostki
      const results = [
        { value: powerInKW.toFixed(2), unit: 'kW', fullUnit: 'Kilowat' },
        { value: (powerInKW / 0.73549875).toFixed(2), unit: 'KM', fullUnit: 'Konie mechaniczne' },
        { value: (powerInKW / 0.745699872).toFixed(2), unit: 'BHP', fullUnit: 'Brake horsepower' },
        { value: (powerInKW / 0.745699872).toFixed(2), unit: 'HP', fullUnit: 'Horsepower' },
        { value: (powerInKW / 0.73549875).toFixed(2), unit: 'PS', fullUnit: 'Pferdestärke' },
        { value: (powerInKW / 1000).toFixed(2), unit: 'MW', fullUnit: 'Megawat' }
      ];
  
      // Ustawienie nagłówka wyniku
      const resultHeader = `Moc ${number} ${unit} jest równa:`;
      document.getElementById('result-header').innerText = resultHeader;
  
      // Wypełnienie tabeli wyników
      const resultTable = document.getElementById('result-table');
      resultTable.innerHTML = ''; // Wyczyść tabelę wyników
      results.forEach(result => {
        const row = document.createElement('tr');
        const cellValue = document.createElement('td');
        const cellUnit = document.createElement('td');
        cellValue.innerText = result.value;
        cellUnit.innerText = `${result.unit} (${result.fullUnit})`;
        row.appendChild(cellValue);
        row.appendChild(cellUnit);
        resultTable.appendChild(row);
      });
    });
  </script>
{% endblock %}